(()=>{"use strict";var t,e=function(){function e(){}return e.init=function(e){var r;if(void 0!==e){if(void 0===(r=document.getElementById(e)))throw new Error("Cannot find a canvas element of id: "+e)}else r=document.createElement("canvas"),document.body.appendChild(r);if(void 0===(t=r.getContext("webgl2")))throw new Error("Unable to initilise WebGL2");return r},e}(),r=function(){},i=function(){function e(e,r,i,o){switch(void 0===r&&(r=t.FLOAT),void 0===i&&(i=t.ARRAY_BUFFER),void 0===o&&(o=t.TRIANGLES),this.m_HasAttributeLocation=!1,this.m_Data=[],this.m_Attributes=[],this.m_ElementSize=e,this.m_DataType=r,this.m_TargetBufferType=i,this.m_Mode=o,this.m_DataType){case t.FLOAT:case t.INT:case t.UNSIGNED_INT:this.m_TypeSize=4;break;case t.SHORT:case t.UNSIGNED_SHORT:this.m_TypeSize=2;break;case t.BYTE:case t.UNSIGNED_BYTE:this.m_TypeSize=1;break;default:throw new Error("Unrecognised data type ".concat(r.toString()))}this.m_Stride=this.m_ElementSize*this.m_TypeSize,this.m_GLBuffer=t.createBuffer(),this.m_VAO=t.createVertexArray()}return e.prototype.destroy=function(){t.deleteBuffer(this.m_GLBuffer)},e.prototype.bind=function(e){var r=this;void 0===e&&(e=!1),t.bindVertexArray(this.m_VAO),t.bindBuffer(this.m_TargetBufferType,this.m_GLBuffer),this.m_HasAttributeLocation&&this.m_Attributes.forEach((function(i){t.vertexAttribPointer(i.location,i.size,r.m_DataType,e,r.m_Stride,i.offset*r.m_TypeSize),t.enableVertexAttribArray(i.location)}))},e.prototype.bindVAO=function(){t.bindVertexArray(this.m_VAO)},e.prototype.unbind=function(){t.bindBuffer(t.ARRAY_BUFFER,void 0),t.bindVertexArray(null)},e.prototype.addAttributeLocation=function(t){this.m_HasAttributeLocation=!0,this.m_Attributes.push(t)},e.prototype.pushBackData=function(t){var e=this;t.forEach((function(t){e.m_Data.push(t)}))},e.prototype.upload=function(){var e;switch(t.bindBuffer(this.m_TargetBufferType,this.m_GLBuffer),this.m_DataType){case t.FLOAT:e=new Float32Array(this.m_Data);break;case t.INT:e=new Int32Array(this.m_Data);break;case t.UNSIGNED_INT:e=new Uint32Array(this.m_Data);break;case t.SHORT:e=new Int16Array(this.m_Data);break;case t.UNSIGNED_SHORT:e=new Uint16Array(this.m_Data);break;case t.BYTE:e=new Int8Array(this.m_Data);break;case t.UNSIGNED_BYTE:e=new Uint8Array(this.m_Data)}t.bufferData(this.m_TargetBufferType,e,t.STATIC_DRAW)},e.prototype.draw=function(){this.m_TargetBufferType===t.ARRAY_BUFFER?t.drawArrays(this.m_Mode,0,this.m_Data.length/this.m_ElementSize):this.m_TargetBufferType===t.ELEMENT_ARRAY_BUFFER&&t.drawElements(this.m_Mode,this.m_Data.length,this.m_DataType,0)},e}();const o=function(){function t(t,e,r){void 0===e&&(e=100),void 0===r&&(r=100),this.m_Name=t,this.m_Height=r,this.m_Width=e}return t.prototype.load=function(){this.m_Buffer=new i(3);var t=new r;t.location=0,t.size=3,t.offset=0,this.m_Buffer.addAttributeLocation(t),this.m_Buffer.bind(),this.m_Buffer.pushBackData([0,0,0,0,.5,0,.5,.5,0,.5,.5,0,.5,0,0,0,0,0]),this.m_Buffer.upload(),this.m_Buffer.unbind()},t.prototype.update=function(t){},t.prototype.draw=function(){this.m_Buffer.bindVAO(),this.m_Buffer.draw()},t}();var a=function(){function e(e,r,i){this.m_Attributes={},this.m_Uniforms={},this.m_Name=e;var o=this.loadShader(r,t.VERTEX_SHADER),a=this.loadShader(i,t.FRAGMENT_SHADER);this.createShaderProgram(o,a),this.detectAttributes(),this.detectUniforms()}return Object.defineProperty(e.prototype,"name",{get:function(){return this.m_Name},enumerable:!1,configurable:!0}),e.prototype.use=function(){t.useProgram(this.m_Program)},e.prototype.getAttributeLocation=function(t){if(void 0===this.m_Attributes[t])throw new Error("error getting attribute '".concat(t,"' :for ").concat(this.name));return this.m_Attributes[t]},e.prototype.getUniformLocation=function(t){if(void 0===this.m_Uniforms[t])throw new Error("error getting uniform '".concat(t,"' :for ").concat(this.name));return this.m_Uniforms[t]},e.prototype.loadShader=function(e,r){var i=t.createShader(r);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(i);throw new Error("error compiling shader '".concat(this.m_Name,"' : ").concat(o))}return i},e.prototype.createShaderProgram=function(e,r){if(this.m_Program=t.createProgram(),t.attachShader(this.m_Program,e),t.attachShader(this.m_Program,r),t.linkProgram(this.m_Program),!t.getProgramParameter(this.m_Program,t.LINK_STATUS)){var i=t.getProgramInfoLog(this.m_Program);throw new Error("error linking shader ".concat(this.m_Name," : ").concat(i))}},e.prototype.detectAttributes=function(){for(var e=t.getProgramParameter(this.m_Program,t.ACTIVE_ATTRIBUTES),r=0;r<e;++r){var i=t.getActiveAttrib(this.m_Program,r);if(!i)break;this.m_Attributes[i.name]=t.getAttribLocation(this.m_Program,i.name)}},e.prototype.detectUniforms=function(){for(var e=t.getProgramParameter(this.m_Program,t.ACTIVE_UNIFORMS),r=0;r<e;++r){var i=t.getActiveUniform(this.m_Program,r);if(!i)break;this.m_Uniforms[i.name]=t.getUniformLocation(this.m_Program,i.name)}},e}();const n=a,s=function(){function r(){}return r.prototype.start=function(){this.m_Canvas=e.init(),t.clearColor(0,0,0,1),this.loadShaders(),this.m_Shader.use(),this.m_Sprite=new o("test"),this.m_Sprite.load(),this.resize(),this.loop()},r.prototype.resize=function(){void 0!==this.m_Canvas&&(this.m_Canvas.width=window.innerWidth,this.m_Canvas.height=window.innerHeight),t.viewport(0,0,this.m_Canvas.width,this.m_Canvas.height)},r.prototype.loop=function(){t.clear(t.COLOR_BUFFER_BIT);var e=this.m_Shader.getUniformLocation("u_color");t.uniform4f(e,1,.5,0,1),this.m_Sprite.draw(),requestAnimationFrame(this.loop.bind(this))},r.prototype.loadShaders=function(){this.m_Shader=new n("basic","#version 300 es\n\n                in vec4 a_position;\n                \n                void main() {\n                    gl_Position = a_position;\n                }","#version 300 es\n\n                precision highp float;\n                uniform vec4 u_color;\n                out vec4 outColor;\n                \n                \n                void main() {\n                    outColor = u_color;\n                }")},r}();var m;window.onload=function(){(m=new s).start()},window.onresize=function(){m.resize()}})();